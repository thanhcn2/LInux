Role ssh policy dùng để làm gì?

Role ssh policy dùng để vô hiệu hóa ssh bằng tài khoản root. cho phép ssh bằng một user cụ thể.


cacs varlible cần lưu ý.

01. khóa ssh bằng tài khoản root bằng đường dẫn sshd_config trong folder default.


- name: Disable empty password login

  lineinfile: dest={{ sshd_config }} regexp="^#?PermitEmptyPasswords" line="PermitEmptyPasswords no"

  notify: restart ssh


02. Vô hiệu hóa ssh không có mật khẩu bằng đường dẫn sshd_config trong folder default.

- name: Disable password login
  lineinfile: dest={{ sshd_config }} regexp="^#?PasswordAuthentication" line="PasswordAuthentication no"

  notify: restart ssh


03. cho phép tài khoản cụ thể được ssh và đặt tags limitsshuser.

- name: Allow specific users

  lineinfile: dest=/etc/ssh/sshd_config

    state=present

    regexp='^AllowUsers'

    line='AllowUsers {{ ssh_allowed_users | join(" ") }}'

    backup=yes

    validate='sshd -t -f %s'

  when: ssh_allowed_users is defined

  notify:

    - restart ssh

  tags: limitsshusers


Role Role telegraf dùng để làm gì?

Role Role telegraf dùng để cài đặt telegrraf và các gói liên quan.

các varlible cần lưu ý

01. sao chép nọi dung file telegraf_2nd.conf.j2 trong thư mục templates vào file telegraf.conf phân quyền sở hữu root. 

- name: Ubuntu | Defined file or using default

    template:

      src: telegraf_2nd.conf.j2

      dest: "/etc/telegraf/telegraf.conf"

      owner: root

    when: telegraf_using_2nd_template == "True"

02. sao chép nội dung file telegraf.conf.j2 trong thư mục templates vào file telegraf.conf phân quyền sở hữu root.  

    -  name: Ubuntu | Copy telegraf config file

    template:

      src: telegraf.conf.j2

      dest: /etc/telegraf/telegraf.conf

      owner: root

    when: telegraf_using_2nd_template == "False" 


03. Dùng file templates telegraf_sudoers.j2 cấp quyền root.


 - name: Ubuntu | Allow nagios sudo permission

    template:

      src: telegraf_sudoers.j2

      dest: /etc/sudoers.d/telegraf

      owner: root

      group: root

      mode: 0644

    when: telegraf_sudo_commands is defined






Role Chrony dùng để làm gì?

Role Chrony dùng để gỡ NTP và cài đặt Chrony server.

Các varlible cần lưu ý.

01. gỡ cài đặt NTP

- name: uninstall ntpd before install chrony
  apt:
    name: ntp
    state: absent
    purge: yes


02. sao chép chrony.conf.j2 trong thư mục templates vào file chrony.conf

 - name: config chrony (Debian)

  template:

    src: chrony.conf.j2

    dest: /etc/chrony/chrony.conf
    
  notify:

    - restart chrony debian


03.  tạo một thư mục script_log_dir trong /opt và  thay đổi quyền.

 - name: create scripts diretory if it does not exits

  file: 

    path: /opt/{{ script_log_dir }}

    state: directory

    owner: root

    group: root
    
    mode: 755

04. sao chép nội dung set_time.sh.j2 trong thư mục templates vào /opt/{{ script_log_dir }}/set_time.sh và thay đổi quyền.

- name: Copy script set time

  template:

    src: set_time.sh.j2

    dest: /opt/{{ script_log_dir }}/set_time.sh

    mode: '0755'



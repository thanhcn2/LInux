Role add-rclocal dùng để làm gì?

Role add-rclocal dùng để thêm một nội dung vào file rc.local

Các varlible cần lưu ý. 

01. tạo file rc.local và register: rc_local_check

- name: Check file rc.local
  stat:
    path: /etc/rc.local
  register: rc_local_check


02. Sao chép nội dung file rc.local.origin trong tempalates vào file rc.local và thay đổi quyền. khi rc_local_check.stat.exists == False

- name: Create rc.local if not exist

  copy:

    src: rc.local.origin

    dest: /etc/rc.local

    owner: root

    group: root

    mode: 0755

  when: rc_local_check.stat.exists == False


03.  Sao chép nội dung file rc-local-ubuntu.j2 trong tempalates vào file rc.local và thay đổi quyền.

- name: Add command to /etc/rc.local

  template:

    src: rc-local-ubuntu.j2

    dest: /etc/rc.local

    owner: root

    group: root

    mode: 0755

04. cho phép chạy rc.local

- name: Execute the command to add route immediaterly

  shell: bash /etc/rc.local
